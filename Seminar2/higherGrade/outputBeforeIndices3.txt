                                                                                              QUERY PLAN                                                                                              
------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
 Subquery Scan on allocated_hours_view  (cost=8.90..9.02 rows=1 width=185) (actual time=0.366..0.374 rows=1 loops=1)
   ->  GroupAggregate  (cost=8.90..9.01 rows=1 width=189) (actual time=0.364..0.370 rows=1 loops=1)
         Group Key: course_layout.hp, course_instance.instance_id, course_instance.study_period, course_instance.study_year, course_instance.num_students, person.last_name, job_title.job_title
         ->  Sort  (cost=8.90..8.91 rows=1 width=76) (actual time=0.326..0.332 rows=1 loops=1)
               Sort Key: course_layout.hp, course_instance.instance_id, course_instance.study_period, course_instance.study_year, course_instance.num_students, person.last_name, job_title.job_title
               Sort Method: quicksort  Memory: 25kB
               ->  Nested Loop  (cost=3.24..8.89 rows=1 width=76) (actual time=0.259..0.271 rows=1 loops=1)
                     Join Filter: (job_title.id = employee.job_title_id)
                     ->  Nested Loop  (cost=3.24..7.82 rows=1 width=68) (actual time=0.244..0.255 rows=1 loops=1)
                           Join Filter: (teaching_activity.id = planned_activity.teaching_activity_id)
                           ->  Nested Loop  (cost=3.24..6.73 rows=1 width=61) (actual time=0.232..0.243 rows=1 loops=1)
                                 Join Filter: ((course_instance.id = planned_activity.course_instance_id) AND ((planned_activity.planned_activity)::text = (allocation.planned_activity)::text))
                                 ->  Nested Loop  (cost=3.24..5.53 rows=1 width=77) (actual time=0.221..0.231 rows=1 loops=1)
                                       Join Filter: (course_instance.id = allocation.course_instance_id)
                                       Rows Removed by Join Filter: 3
                                       ->  Hash Join  (cost=1.07..2.17 rows=1 width=41) (actual time=0.122..0.127 rows=1 loops=1)
                                             Hash Cond: (course_instance.course_layout_id = course_layout.id)
                                             ->  Seq Scan on course_instance  (cost=0.00..1.07 rows=7 width=33) (actual time=0.020..0.021 rows=7 loops=1)
                                             ->  Hash  (cost=1.06..1.06 rows=1 width=16) (actual time=0.084..0.086 rows=1 loops=1)
                                                   Buckets: 1024  Batches: 1  Memory Usage: 9kB
                                                   ->  Seq Scan on course_layout  (cost=0.00..1.06 rows=1 width=16) (actual time=0.011..0.014 rows=1 loops=1)
                                                         Filter: ((course_code)::text = 'CS101'::text)
                                                         Rows Removed by Filter: 4
                                       ->  Hash Join  (cost=2.16..3.33 rows=2 width=36) (actual time=0.093..0.098 rows=4 loops=1)
                                             Hash Cond: (allocation.employee_id = employee.id)
                                             ->  Seq Scan on allocation  (cost=0.00..1.11 rows=11 width=24) (actual time=0.011..0.012 rows=11 loops=1)
                                             ->  Hash  (cost=2.15..2.15 rows=1 width=20) (actual time=0.048..0.049 rows=1 loops=1)
                                                   Buckets: 1024  Batches: 1  Memory Usage: 9kB
                                                   ->  Hash Join  (cost=1.07..2.15 rows=1 width=20) (actual time=0.036..0.039 rows=1 loops=1)
                                                         Hash Cond: (employee.person_id = person.id)
                                                         ->  Seq Scan on employee  (cost=0.00..1.05 rows=5 width=12) (actual time=0.006..0.007 rows=5 loops=1)
                                                         ->  Hash  (cost=1.06..1.06 rows=1 width=16) (actual time=0.014..0.015 rows=1 loops=1)
                                                               Buckets: 1024  Batches: 1  Memory Usage: 9kB
                                                               ->  Seq Scan on person  (cost=0.00..1.06 rows=1 width=16) (actual time=0.008..0.009 rows=1 loops=1)
                                                                     Filter: ((first_name)::text = 'Alice'::text)
                                                                     Rows Removed by Filter: 4
                                 ->  Seq Scan on planned_activity  (cost=0.00..1.08 rows=8 width=27) (actual time=0.008..0.008 rows=1 loops=1)
                           ->  Seq Scan on teaching_activity  (cost=0.00..1.04 rows=4 width=11) (actual time=0.009..0.009 rows=1 loops=1)
                     ->  Seq Scan on job_title  (cost=0.00..1.03 rows=3 width=16) (actual time=0.008..0.009 rows=1 loops=1)
 Planning Time: 3.445 ms
 Execution Time: 0.546 ms

 uni=# SELECT * FROM allocated_hours_view WHERE course_code ='CS101' AND first_name ='Alice';
 course_code | hp  |  instance_id  | study_period | study_year | first_name | last_name | job_title | lecture_hours | lab_hours | seminar_hours | tutorial_hours | admin_hours | examination_hours | total_hours 
-------------+-----+---------------+--------------+------------+------------+-----------+-----------+---------------+-----------+---------------+----------------+-------------+-------------------+-------------
 CS101       | 7.5 | CS101-2025-P1 | P1           | 2025-01-01 | Alice      | Johnson   | Professor |            10 |         0 |             0 |              0 |        60.0 |            93.625 |     189.625
(1 row)

